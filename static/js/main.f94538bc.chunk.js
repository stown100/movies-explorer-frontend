(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],{31:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(24),s=a.n(c),i=(a(31),a(10)),o=a.n(i),l=a(12),u=a(11),m=a(2),j=a(4),b=a(9),h=a(19),d=a(0),_=["component"],f=function(e){var t=e.component,a=Object(h.a)(e,_);return Object(d.jsx)(j.b,Object(b.a)(Object(b.a)({},a),{},{render:function(e){return a.loggedIn?Object(d.jsx)(t,Object(b.a)(Object(b.a)({},e),a)):Object(d.jsx)(j.a,{to:"/"})}}))},p=["component"],x=function(e){var t=e.component,a=Object(h.a)(e,p),n=Object(j.g)();return Object(d.jsx)(j.b,Object(b.a)(Object(b.a)({},a),{},{render:function(e){return a.loggedIn?n.push("/"):Object(d.jsx)(t,Object(b.a)(Object(b.a)({},e),a))}}))};var O=function(){return Object(d.jsxs)("footer",{className:"footer",children:[Object(d.jsx)("p",{className:"footer__text",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm"}),Object(d.jsx)("hr",{className:"footer__br"}),Object(d.jsx)("div",{className:"footer__bot",children:Object(d.jsxs)("div",{className:"footer__bot_buttons",children:[Object(d.jsx)("a",{href:"https://practicum.yandex.ru/web/",className:"footer__bot_buttons-child",target:"_blank",rel:"noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"}),Object(d.jsx)("a",{href:"https://github.com/stown100",className:"footer__bot_buttons-child",target:"_blank",rel:"noreferrer",children:"Github"}),Object(d.jsx)("a",{href:"https://www.instagram.com/borodulin_developer/",className:"footer__bot_buttons-child",target:"_blank",rel:"noreferrer",children:"Instagtam"}),Object(d.jsxs)("p",{className:"footer__bot-date",children:["\xa9 ",(new Date).getFullYear()]})]})})]})},g=a(3),v=a.p+"static/media/greenlogo.dcc93f5f.svg";var N=function(){return Object(d.jsx)(j.b,{children:Object(d.jsxs)("header",{className:"header-main",children:[Object(d.jsx)("img",{className:"header-main__logo",src:v,alt:"logo"}),Object(d.jsxs)("div",{className:"header-main__authorized",children:[Object(d.jsx)("button",{className:"header-main__authorized_button",children:Object(d.jsx)(g.b,{to:"signup",className:"header-main__authorized_button-register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(d.jsx)("button",{className:"header-main__authorized_button",children:Object(d.jsx)(g.b,{to:"signin",className:"header-main__authorized_button-enter",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})})},k=a.p+"static/media/weblogo.0e756d9d.svg",y=a.p+"static/media/avatar.ba79909b.jpg",S=a.p+"static/media/pointer.78c4c42a.svg",E=a.p+"static/media/closeicon.4828fddb.svg",w=function(){var e=r.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),s=Object(m.a)(c,2),i=s[0],o=s[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"burger",onClick:function(){n(!0),o(!1)},children:Object(d.jsx)("span",{className:a?"span_hidden":"span"})}),Object(d.jsxs)("div",{className:"burger__block ".concat(i&&"burger__block_hidden"," ").concat(a&&"burger__block_visible"),children:[Object(d.jsx)("img",{className:"burger__close",src:E,alt:"close",onClick:function(){o(!0),n(!1)}}),Object(d.jsxs)("div",{className:"burger__block_text",children:[Object(d.jsx)("button",{className:"burger__block_text-text",children:Object(d.jsx)(g.b,{to:"/",className:"header__link",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(d.jsx)("button",{className:"burger__block_text-text",children:Object(d.jsx)(g.b,{to:"movies",className:"header__link",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(d.jsx)("button",{className:"burger__block_text-text",children:Object(d.jsx)(g.b,{to:"saved-movies",className:"header__link",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})})]}),Object(d.jsx)("button",{className:"burger__block_button-account header__black_account",children:Object(d.jsx)(g.b,{to:"profile",className:"header__link",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})})]})]})};var C=function(){return Object(d.jsx)(j.b,{children:Object(d.jsxs)("header",{className:"header_authorize",children:[Object(d.jsx)(g.b,{to:"/",className:"header__logo",children:Object(d.jsx)("img",{className:"header__logo",src:v,alt:"logo"})}),Object(d.jsxs)("div",{className:"header__film",children:[Object(d.jsx)("button",{className:"header__films_authorize",children:Object(d.jsx)(g.b,{to:"movies",className:"header__link",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(d.jsx)("button",{className:"header__save-films_authorize",children:Object(d.jsx)(g.b,{to:"saved-movies",className:"header__link",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})}),Object(d.jsx)("button",{className:"header__account_authorize",children:Object(d.jsx)(g.b,{to:"profile",className:"header__link",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})})]}),Object(d.jsx)(w,{})]})})};var L=function(e){var t=e.loggedIn;return Object(d.jsxs)("main",{className:"main",children:[t?Object(d.jsx)(C,{}):Object(d.jsx)(N,{}),Object(d.jsxs)("div",{className:"promo",children:[Object(d.jsx)("img",{className:"promo__logo",src:k,alt:"web-logo"}),Object(d.jsxs)("h1",{className:"promo__title",children:["\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430",Object(d.jsx)("br",{}),"\u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."]}),Object(d.jsx)("p",{className:"promo__text",children:"\u041b\u0438\u0441\u0442\u0430\u0439\u0442\u0435 \u043d\u0438\u0436\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u0440\u043e \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442 \u0438 \u0435\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044f."}),Object(d.jsx)("button",{className:"promo__button",children:Object(d.jsx)("a",{href:"https://practicum.yandex.ru/web/",className:"promo__button_link",target:"_blank",rel:"noreferrer",children:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"})})]}),Object(d.jsxs)("div",{className:"about-project",children:[Object(d.jsx)("h4",{className:"about-project__title",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(d.jsx)("hr",{className:"about-project__hr"}),Object(d.jsxs)("div",{className:"about-project__text-block",children:[Object(d.jsx)("h5",{className:"about-project__text-block_subtitle",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043b\u044e\u0447\u0438\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(d.jsx)("p",{className:"about-project__text-block_text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."}),Object(d.jsx)("h5",{className:"about-project__text-block_subtitle",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(d.jsx)("p",{className:"about-project__text-block_text",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]}),Object(d.jsxs)("div",{className:"about-project__front-back",children:[Object(d.jsx)("div",{className:"about-project__front-back_back",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(d.jsx)("div",{className:"about-project__front-back_front",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"})]}),Object(d.jsxs)("div",{className:"about-project__figcaption",children:[Object(d.jsx)("p",{className:"about-project__figcaption_text1",children:"Back-end"}),Object(d.jsx)("p",{className:"about-project__figcaption_text2",children:"Front-end"})]})]}),Object(d.jsxs)("div",{className:"techs",children:[Object(d.jsx)("h4",{className:"techs__title about-project__title",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(d.jsx)("hr",{className:"techs__hr about-project__hr"}),Object(d.jsx)("h3",{className:"techs__subtitle",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(d.jsx)("p",{className:"techs__text",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u044f \u043e\u0441\u0432\u043e\u0438\u043b \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(d.jsxs)("div",{className:"techs__blocks",children:[Object(d.jsx)("div",{className:"techs__blocks_technology",children:"HTML"}),Object(d.jsx)("div",{className:"techs__blocks_technology",children:"CSS"}),Object(d.jsx)("div",{className:"techs__blocks_technology",children:"JS"}),Object(d.jsx)("div",{className:"techs__blocks_technology",children:"React"}),Object(d.jsx)("div",{className:"techs__blocks_technology",children:"Git"}),Object(d.jsx)("div",{className:"techs__blocks_technology",children:"Express.js"}),Object(d.jsx)("div",{className:"techs__blocks_technology",children:"mongoDB"})]})]}),Object(d.jsxs)("div",{className:"about-me",children:[Object(d.jsx)("h4",{className:"about-me__title about-project__title",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(d.jsx)("hr",{className:"about-me__hr about-project__hr"}),Object(d.jsxs)("div",{className:"about-me__me",children:[Object(d.jsx)("img",{className:"about-me__me_avatar",src:y,alt:"Foto"}),Object(d.jsx)("h3",{className:"about-me__me_name",children:"\u0421\u0435\u0440\u0433\u0435\u0439"}),Object(d.jsx)("h5",{className:"about-me__me_title",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 26 \u043b\u0435\u0442"}),Object(d.jsx)("p",{className:"about-me__me_text",children:"\u0425\u043e\u0447\u0443 \u0440\u0430\u0437\u0432\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0432 IT \u0441\u0444\u0435\u0440\u0435, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0432 web-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435. \u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u0435. \u0425\u043e\u0447\u0435\u0442\u0441\u044f \u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0435, \u0443\u0434\u043e\u0431\u043d\u044b\u0435 \u0438 \u043f\u0440\u043e\u0441\u0442\u044b\u0435 \u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u044b. \u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f web-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430. \u041f\u043e\u043c\u0438\u043c\u043e \u043a\u0443\u0440\u0441\u043e\u0432 \u044f \u0441\u043c\u043e\u0442\u0440\u044e \u043e\u0431\u0443\u0447\u0430\u044e\u0449\u0438\u0435 \u0432\u0438\u0434\u0435\u043e, \u0447\u0438\u0442\u0430\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u044e\u0441\u044c \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447 \u043f\u043e JS. \u0414\u043e \u044d\u0442\u043e\u0433\u043e \u0434\u043e\u043b\u0433\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0432 \u0441\u0444\u0435\u0440\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043f\u0440\u043e\u0434\u0430\u0436. \u041b\u0435\u0433\u043a\u043e \u043d\u0430\u0445\u043e\u0436\u0443 \u043e\u0431\u0449\u0438\u0439 \u044f\u0437\u044b\u043a \u0441 \u043b\u044e\u0434\u044c\u043c\u0438. \u041d\u0435 \u043b\u044e\u0431\u043b\u044e \u043e\u043f\u0430\u0437\u0434\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443, \u0442\u0430\u043a \u043a\u0430\u043a \u0443\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u0442\u043d\u043e\u0448\u0443\u0441\u044c \u043a \u0441\u0432\u043e\u0438\u043c \u043a\u043e\u043b\u043b\u0435\u0433\u0430\u043c. \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e: \u0432 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u0442\u0430\u044e\u0441\u044c \u043d\u0430 \u0432\u0435\u043b\u043e\u0441\u0438\u043f\u0435\u0434\u0435, \u0437\u0430\u043d\u0438\u043c\u0430\u044e\u0441\u044c \u0432 \u0437\u0430\u043b\u0435, \u043b\u044e\u0431\u043b\u044e \u0447\u0438\u0442\u0430\u0442\u044c, \u0438\u0433\u0440\u0430\u0442\u044c \u0432 \u043f\u0438\u043d\u0433-\u043f\u043e\u043d\u0433 \u0438 \u0432\u043e\u043b\u0435\u0439\u0431\u043e\u043b."}),Object(d.jsxs)("div",{className:"about-me__me_links",children:[Object(d.jsx)("a",{href:"https://www.instagram.com/borodulin_developer/",className:"about-me__me_links1 about-me__me_links-inst",target:"_blank",rel:"noreferrer",children:"Instagram"}),Object(d.jsx)("a",{href:"https://github.com/stown100",className:"about-me__me_links1 about-me__me_links-git",target:"_blank",rel:"noreferrer",children:"Github"})]})]})]}),Object(d.jsxs)("div",{className:"portfolio",children:[Object(d.jsx)("h6",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(d.jsxs)("div",{className:"portfolio__block",children:[Object(d.jsxs)("a",{href:"https://github.com/stown100/how-to-learn",className:"portfolio__block_link",target:"_blank",rel:"noreferrer",children:["\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442",Object(d.jsx)("img",{className:"portfolio__block_link-pointer",src:S,alt:"pointer"})]}),Object(d.jsxs)("a",{href:"https://stown100.github.io/Russian-travel/",className:"portfolio__block_link",target:"_blank",rel:"noreferrer",children:["\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442",Object(d.jsx)("img",{className:"portfolio__block_link-pointer",src:S,alt:"pointer"})]}),Object(d.jsxs)("a",{href:"https://github.com/stown100/react-mesto-api-full",className:"portfolio__block_link",target:"_blank",rel:"noreferrer",children:["\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435",Object(d.jsx)("img",{className:"portfolio__block_link-pointer",src:S,alt:"pointer"})]})]})]}),Object(d.jsx)(O,{})]})};var I=function(){var e=Object(j.g)();return Object(d.jsx)(j.b,{children:Object(d.jsxs)("div",{className:"error",children:[Object(d.jsx)("h2",{className:"error__number",children:"404"}),Object(d.jsx)("p",{className:"error__text",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(d.jsx)("button",{className:"error__link",onClick:function(){e.goBack(),e.goBack(),e.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})})},D=function(e,t){var a=r.a.useState(!0),n=Object(m.a)(a,2),c=n[0],s=n[1],i=r.a.useState(!1),o=Object(m.a)(i,2),l=o[0],u=o[1],j=r.a.useState(!1),b=Object(m.a)(j,2),h=b[0],d=b[1],_=r.a.useState(!1),f=Object(m.a)(_,2),p=f[0],x=f[1],O=r.a.useState(!1),g=Object(m.a)(O,2),v=g[0],N=g[1];return r.a.useEffect((function(){for(var a in t)switch(a){case"minLengthError":e.length<t[a]?u(!0):u(!1);break;case"isEmpty":s(!e);break;case"maxLengthError":e.length>t[a]?d(!0):d(!1);break;case"isEmail":/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@\\"]+\.)+[^<>()[\]\\.,;:\s@\\"]{2,})$/i.test(String(e).toLowerCase())?x(!1):x(!0)}}),[e]),r.a.useEffect((function(){N(!(c||h||l||p))}),[c,h,l,p]),{isEmpty:c,minLengthError:l,maxLengthError:h,emailError:p,inputValid:v}},B=function(e,t){var a=r.a.useState(e),n=Object(m.a)(a,2),c=n[0],s=n[1],i=r.a.useState(!1),o=Object(m.a)(i,2),l=o[0],u=o[1],j=D(c,t);return Object(b.a)({value:c,onChange:function(e){s(e.target.value)},onBlur:function(e){u(!0)},isDirty:l},j)},R=function(e){var t=e.children,a=e.title,n=e.onSubmit,r=e.text,c=e.link,s=e.to;return Object(d.jsx)("div",{className:"register",children:Object(d.jsx)("div",{className:"register__container",children:Object(d.jsxs)("form",{className:"form",onSubmit:n,action:"#",children:[Object(d.jsx)(g.b,{to:"/",className:"header__logo",children:Object(d.jsx)("img",{className:"header__logo register__logo",src:v,alt:"logo"})}),Object(d.jsx)("h2",{className:"register__title",children:a}),t,Object(d.jsxs)("p",{className:"register__text",children:[r,Object(d.jsx)(g.b,{to:s,className:"register__link",children:c})]})]})})})},T=function(e){var t=e.onRegister,a=B("",{isEmpty:!0,minLengthError:2,maxLengthError:30}),n=B("",{isEmpty:!0,minLengthError:3,isEmail:!0}),c=B("",{isEmpty:!0,minLengthError:2,maxLengthError:30}),s=a.isDirty&&a.isEmpty||a.isDirty&&a.minLengthError||a.isDirty&&a.maxLengthError,i=n.isDirty&&n.isEmpty||n.isDirty&&n.minLengthError||n.isDirty&&n.emailError,l=c.isDirty&&c.isEmpty||c.isDirty&&c.minLengthError||c.isDirty&&c.maxLengthError,b=r.a.useState(""),h=Object(m.a)(b,2),_=h[0],f=h[1],p=r.a.useState(""),x=Object(m.a)(p,2),O=x[0],g=x[1],v=r.a.useState(""),N=Object(m.a)(v,2),k=N[0],y=N[1],S=Object(j.g)(),E=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t({name:_,email:O,password:k}).then((function(){return S.push("/signin")})).then((function(){return S.push("/movies")})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect((function(){localStorage.getItem("jwt")&&S.push("/movies")}),[S]),Object(d.jsxs)(R,{onSubmit:E,title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c",text:"\u0412\u044b \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b?",link:"\u0412\u043e\u0439\u0442\u0438",to:"signin",children:[Object(d.jsx)("p",{className:"form__text-input",children:"\u0418\u043c\u044f"}),Object(d.jsx)("input",{className:s?"form__input_red":"form__input",required:!0,name:"name",type:"text",value:_,onChange:function(e){a.onChange(e),f(e.target.value)},onBlur:function(e){return a.onBlur(e)}}),s&&Object(d.jsx)("span",{className:"form__input_span",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043e\u0442 2 \u0434\u043e 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),Object(d.jsx)("p",{className:"form__text-input",children:"E-mail"}),Object(d.jsx)("input",{className:i?"form__input_red":"form__input",required:!0,name:"email",type:"email",value:O,onChange:function(e){n.onChange(e),g(e.target.value)},onBlur:function(e){return n.onBlur(e)}}),i&&Object(d.jsx)("span",{className:"form__input_span",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email \u0430\u0434\u0440\u0435\u0441."}),Object(d.jsx)("p",{className:"form__text-input",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(d.jsx)("input",{className:l?"form__input_red":"form__input",required:!0,name:"password",type:"password",value:k,onChange:function(e){c.onChange(e),y(e.target.value)},onBlur:function(e){return c.onBlur(e)}}),l&&Object(d.jsx)("span",{className:"form__input_span",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 2 \u0434\u043e 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),Object(d.jsx)("button",{disabled:!n.inputValid||!c.inputValid,type:"submit",className:s||i||l?"form__button_disabled":"form__button",children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},P=function(e){var t=e.onLogin,a=B("",{isEmpty:!0,minLengthError:3,isEmail:!0}),n=B("",{isEmpty:!0,minLengthError:2,maxLengthError:30}),c=a.isDirty&&a.isEmpty||a.isDirty&&a.minLengthError||a.isDirty&&a.emailError,s=n.isDirty&&n.isEmpty||n.isDirty&&n.minLengthError||n.isDirty&&n.maxLengthError,i=Object(j.g)(),l=r.a.useState(""),b=Object(m.a)(l,2),h=b[0],_=b[1],f=r.a.useState(""),p=Object(m.a)(f,2),x=p[0],O=p[1],g=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.abrupt("return",t({email:h,password:x}).then((function(){return i.push("/movies")})).catch((function(e){return console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(R,{onSubmit:g,title:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!",text:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",link:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",to:"signup",children:[Object(d.jsx)("p",{className:"form__text-input",children:"E-mail"}),Object(d.jsx)("input",{className:c?"form__input_red":"form__input",required:!0,name:"email",type:"email",value:h,onChange:function(e){a.onChange(e),_(e.target.value)},onBlur:function(e){return a.onBlur(e)}}),c&&Object(d.jsx)("span",{className:"form__input_span",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email \u0430\u0434\u0440\u0435\u0441."}),Object(d.jsx)("p",{className:"form__text-input",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(d.jsx)("input",{className:s?"form__input_red":"form__input",required:!0,name:"password",type:"password",value:x,onChange:function(e){n.onChange(e),O(e.target.value)},onBlur:function(e){return n.onBlur(e)}}),s&&Object(d.jsx)("span",{className:"form__input_span",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 2 \u0434\u043e 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),Object(d.jsx)("button",{disabled:!a.inputValid||!n.inputValid,type:"submit",className:c||s?"form__button_disabled":"form__button",children:"\u0412\u043e\u0439\u0442\u0438"})]})};var U=function(){return Object(d.jsx)(j.b,{children:Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)(g.b,{to:"/",className:"header__logo",children:Object(d.jsx)("img",{className:"header__logo",src:v,alt:"logo"})}),Object(d.jsxs)("div",{className:"header__film",children:[Object(d.jsx)("button",{className:"header__films",children:Object(d.jsx)(g.b,{to:"movies",className:"header__link",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(d.jsx)("button",{className:"header__save-films",children:Object(d.jsx)(g.b,{to:"saved-movies",className:"header__link",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})}),Object(d.jsx)("button",{className:"header__account",children:Object(d.jsx)(g.b,{to:"profile",className:"header__link",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})})]}),Object(d.jsx)(w,{})]})})},V=(a(39),function(){return Object(d.jsx)("div",{className:"preloader",children:Object(d.jsx)("div",{className:"preloader__container",children:Object(d.jsx)("span",{className:"preloader__round"})})})}),M=function(e){var t=e.duration,a=e.image,n=e.nameRU,r=e.trailerLink,c=e.children;return Object(d.jsxs)("article",{className:"movies-card__elem",children:[Object(d.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{className:"movies-card__elem_img",alt:n,src:a})}),Object(d.jsxs)("div",{className:"movies-card__elem_title",children:[Object(d.jsx)("h6",{className:"movies-card__elem_title-text",children:n}),c]}),Object(d.jsx)("p",{className:"movies-card__elem_time",children:t})]})},z=function(e){var t=e.country,a=e.created_at,n=e.description,r=e.director,c=e.duration,s=e.image,i=e.nameEN,o=e.nameRU,l=e.trailerLink,u=e.updated_at,m=e.year,j=e.handleAddPlaceSubmit,b=e.movieId,h=e.trailer,_=e.thumbnail,f=e.removeCard,p=e.savedMovies.some((function(e){return e.movieId===b})),x="movies-card__elem_title-button  \n    ".concat(p&&"movies-card__elem_title-button-on");return Object(d.jsx)(M,{nameRU:o,nameEN:i,trailerLink:l,alt:o,duration:c,image:s,country:t,created_at:a,description:n,director:r,updated_at:u,year:m,movieId:b,trailer:h,thumbnail:_,children:Object(d.jsx)("button",{className:x,onClick:function(){p?f(b):j({country:t,director:r,duration:c,year:m,description:n,trailer:h,thumbnail:_,movieId:b,nameRU:o,nameEN:i,image:s})}})})},J=a.p+"static/media/loupe.15e54325.svg";var A=function(e){var t=e.moviesInfo,a=e.handleAddPlaceSubmit,n=e.visibleData,c=e.setVisibleData,s=e.search,i=e.setSearch,o=e.text,u=e.textValid,j=e.removeCard,b=e.savedMovies,h=e.preload,_=e.onButton,f=e.setOnButton,p=e.setTextState,x=e.textState,g=e.setPreload,v=r.a.useState(0),N=Object(m.a)(v,2),k=N[0],y=N[1],S=t.slice(0,16+k),E=t.filter((function(e){return e.nameRU.toLowerCase().includes(s.toLowerCase())})),w=Object(l.a)(t.filter((function(e){return e.duration<=40}))),C=w.filter((function(e){return e.nameRU.toLowerCase().includes(s.toLowerCase())})),L=E.length>16&&w.length!==n.length&&C.length!==n.length&&n.length!==t.length,I="".concat(L?"even__button":"even__button_hidden"),D=0!==n.length?n.map((function(e){var t=e.country,n=e.created_at,r=e.description,c=e.director,s=e.duration,i=e.image,o=e.nameEN,l=e.nameRU,u=e.trailerLink,m=e.updated_at,h=e.year,_=e.id;return Object(d.jsx)(z,{nameRU:l,nameEN:o,trailerLink:u,alt:l,duration:s,image:"https://api.nomoreparties.co".concat(i.url),country:t,created_at:n,description:r,director:c,updated_at:m,year:h,handleAddPlaceSubmit:a,movieId:_,trailer:u,thumbnail:u,removeCard:j,savedMovies:b},_)})):Object(d.jsx)("h2",{className:0===w.length?"movies-card__title":"movies-card__title_active",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"});return Object(d.jsxs)("main",{className:"movies",children:[Object(d.jsx)(U,{}),Object(d.jsx)("form",{className:"search",onSubmit:function(e){!function(e){e.preventDefault(),g(!0),_&&(0!==s.length?(c(C),g(!1)):(c(w),g(!1))),_||(0!==s.length?(c(E),g(!1)):(c(S),g(!1)))}(e)},noValidate:!0,children:Object(d.jsxs)("div",{className:"search__block",children:[Object(d.jsx)("input",{onChange:function(e){p(e.target.value),i(e.target.value),o.onChange(e)},onBlur:function(e){return o.onBlur(e)},value:x,type:"text",className:u?"search__input_red":"search__input",placeholder:"\u0424\u0438\u043b\u044c\u043c"}),u&&Object(d.jsx)("span",{className:"search__input_span",children:"\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"}),Object(d.jsx)("button",{type:"submit",className:"search__block_button",children:Object(d.jsx)("img",{src:J,alt:"search"})})]})}),Object(d.jsxs)("div",{className:"filter-checkbox",children:[Object(d.jsx)("button",{className:_?"filter-checkbox__button_on":"filter-checkbox__button_of",onClick:function(){f(!_),g(!0),_?(c(E.slice(0,16+k)),g(!1)):(w.length>0&&n.length>0&&(c(w),g(!1)),0!==s.length&&c(C))}}),Object(d.jsx)("p",{className:"search__slider_text",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]}),Object(d.jsxs)("div",{className:"movies-card",children:[h&&Object(d.jsx)(V,{}),D]}),Object(d.jsx)("div",{className:"even",children:Object(d.jsx)("button",{onClick:function(){y(k+4),c(S)},className:I,children:"\u0415\u0449\u0451"})}),Object(d.jsx)(O,{})]})},F=a.p+"static/media/removeCardIcon.5856f144.svg",q=function(e){var t=e.description,a=e.director,n=e.duration,r=e.image,c=e.movieId,s=e.owner,i=e.thumbnail,o=e.trailerLink,l=e.year,u=e._id,m=e.removeCard;return Object(d.jsx)(M,{_id:u,nameRU:t,director:a,duration:n,image:r,movieId:c,owner:s,thumbnail:i,trailerLink:o,year:l,children:Object(d.jsx)("button",{className:"movie-card__elem_img-remove",type:"button",onClick:function(){return m(c)},children:Object(d.jsx)("img",{src:F,alt:"remove"})})})},G=function(e){var t=e.setSearch,a=e.removeCard,n=e.text,c=e.textValid,s=e.savedMovies,i=e.search,o=e.setVisibleSaveData,u=e.visibleSaveData,j=e.preload,b=e.setPreload,h=r.a.useState(!1),_=Object(m.a)(h,2),f=_[0],p=_[1],x=r.a.useState(0),g=Object(m.a)(x,2),v=g[0],N=g[1],k=s.slice(0,16+v),y=s.filter((function(e){return e.description.toLowerCase().includes(i.toLowerCase())})),S=Object(l.a)(s.filter((function(e){return e.duration<=40}))),E=S.filter((function(e){return e.description.toLowerCase().includes(i.toLowerCase())})),w=y.length>16&&S.length!==u.length&&E.length!==u.length&&u.length!==s.length,C="".concat(w&&0!==u.length?"even__button":"even__button_hidden"),L=(0===S.length||0===y.length||0===E.length)&&0===u.length&&0!==s.length,I=0!==u.length?u.map((function(e){var t=e.description,n=e.director,r=e.duration,c=e.image,s=e.movieId,i=e.owner,o=e.thumbnail,l=e.trailer,u=e.year,m=e._id;return Object(d.jsx)(q,{removeCard:a,_id:m,description:t,director:n,duration:r,image:c,movieId:s,owner:i,thumbnail:o,trailerLink:l,year:u},m)})):Object(d.jsx)("h2",{className:L?"movies-card__title_active":"movies-card__title",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"});return Object(d.jsxs)("main",{className:"movies",children:[Object(d.jsx)(U,{}),Object(d.jsx)("form",{className:"search",onSubmit:function(e){e.preventDefault(),b(!0),f&&(0!==i.length?(o(E),b(!1)):(o(S),b(!1))),f||(0!==i.length?(o(y),b(!1)):(o(k),b(!1)))},noValidate:!0,children:Object(d.jsxs)("div",{className:"search__block",children:[Object(d.jsx)("input",{onChange:function(e){t(e.target.value),n.onChange(e)},onBlur:function(e){return n.onBlur(e)},value:n.value,type:"text",className:c?"search__input_red":"search__input",placeholder:"\u0424\u0438\u043b\u044c\u043c",required:!0}),c&&Object(d.jsx)("span",{className:"search__input_span",children:"\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"}),Object(d.jsx)("button",{type:"submit",className:"search__block_button",children:Object(d.jsx)("img",{src:J,alt:"search"})})]})}),Object(d.jsxs)("div",{className:"filter-checkbox",children:[Object(d.jsx)("button",{className:"filter-checkbox__button_of ".concat(f?"filter-checkbox__button_on":"filter-checkbox__button_of"),onClick:function(){b(!0),f?(o(y.slice(0,16+v)),b(!1)):(S.length>0&&u.length>0&&(o(S),b(!1)),0!==i.length&&o(E)),p(!f)}}),Object(d.jsx)("p",{className:"search__slider_text",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]}),Object(d.jsxs)("div",{className:"movies-card",children:[j&&Object(d.jsx)(V,{}),I]}),Object(d.jsx)("div",{className:"even",children:Object(d.jsx)("button",{onClick:function(){N(v+4),o(k)},className:C,children:"\u0415\u0449\u0451"})}),Object(d.jsx)(O,{})]})},H=r.a.createContext(),Y=function(e){var t=e.onSignOut,a=e.handleUpdateUser,n=e.confirm,c=e.confirmError,s=e.setConfirm,i=e.setConfirmError,o=r.a.useContext(H),l=r.a.useState(""),u=Object(m.a)(l,2),b=u[0],h=u[1],_=r.a.useState(""),f=Object(m.a)(_,2),p=f[0],x=f[1],O=B("",{isEmpty:!0,minLengthError:2,maxLengthError:30}),v=B("",{isEmpty:!0,minLengthError:3,isEmail:!0}),N=O.isDirty&&O.isEmpty||O.isDirty&&O.minLengthError||O.isDirty&&O.maxLengthError,k=v.isDirty&&v.isEmpty||v.isDirty&&v.minLengthError||v.isDirty&&v.emailError;return r.a.useEffect((function(){h(o.name),x(o.email)}),[o]),Object(d.jsx)(j.b,{children:Object(d.jsxs)("div",{className:"profile",children:[Object(d.jsx)(U,{}),Object(d.jsx)("div",{className:"profile__title",children:"\u041f\u0440\u0438\u0432\u0435\u0442 ".concat(o.name)}),Object(d.jsxs)("form",{className:"profile__form",action:"#",onSubmit:function(e){e.preventDefault(),p!==o.email?a({name:O.value,email:v.value}):(s(!1),i(!0))},noValidate:!0,children:[Object(d.jsxs)("div",{className:"profile__form_unit",children:[Object(d.jsx)("input",{onChange:function(e){h(e.target.value),O.onChange(e)},onBlur:function(e){return O.onBlur(e)},value:b,type:"text",className:N?"profile__form_input-red":"profile__form_input",required:!0}),Object(d.jsx)("label",{className:"profile__form_label",children:o.name})]}),N&&Object(d.jsx)("span",{className:"form__input_span",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043e\u0442 2 \u0434\u043e 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),Object(d.jsxs)("div",{className:"profile__form_unit-last",children:[Object(d.jsx)("input",{onChange:function(e){x(e.target.value),v.onChange(e)},onBlur:function(e){return v.onBlur(e)},value:p,type:"email",className:k?"profile__form_input-red":"profile__form_input",required:!0}),Object(d.jsx)("label",{className:"profile__form_label",children:o.email})]}),k&&Object(d.jsx)("span",{className:"form__input_span",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email \u0430\u0434\u0440\u0435\u0441."}),Object(d.jsxs)("div",{className:"profile__form_button-block",children:[Object(d.jsx)("span",{className:"".concat(n?"profile__form-confirm_active":"profile__form-confirm"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d."}),Object(d.jsx)("span",{className:"".concat(c?"profile__form-confirm_error":"profile__form-confirm"),children:"\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430."}),Object(d.jsx)("button",{className:N||k?"profile__form_button-disabled":"profile__form_button",disabled:!v.inputValid||!O.inputValid,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(d.jsx)(g.b,{to:"/",className:"profile__exit",onClick:t,children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})]})})},$="https://myfilms.nomoredomains.rocks/api",K=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},Q=a(17),W=a(18),X=new(function(){function e(t){var a=t.url,n=t.headers;Object(Q.a)(this,e),this._handleResponse=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},this.url=a,this.headers=n}return Object(W.a)(e,[{key:"getInitialMovies",value:function(e){return fetch("".concat(this.url,"/beatfilm-movies"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(this._handleResponse)}}]),e}())({url:"https://api.nomoreparties.co"}),Z=new(function(){function e(t){var a=t.url,n=t.headers;Object(Q.a)(this,e),this._handleResponse=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},this.url=a,this.headers=n}return Object(W.a)(e,[{key:"getUserInfo",value:function(e){return fetch("".concat(this.url,"/users/me"),{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"setUserInfo",value:function(e,t){var a=e.email,n=e.name;return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:{authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify({email:a,name:n})}).then(this._handleResponse)}},{key:"addMovie",value:function(e,t){return fetch("".concat(this.url,"/movies"),{method:"POST",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"deleteMovies",value:function(e,t){return fetch("".concat(this.url,"/movies/").concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then(this._handleResponse)}},{key:"getSavedMovies",value:function(e){return fetch("".concat(this.url,"/movies"),{method:"GET",headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify()}).then(this._handleResponse)}}]),e}())({url:"https://myfilms.nomoredomains.rocks/api"});var ee=function(){var e=r.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],c=r.a.useState([]),s=Object(m.a)(c,2),i=s[0],b=s[1],h=r.a.useState([]),_=Object(m.a)(h,2),p=_[0],O=_[1],g=r.a.useState([]),v=Object(m.a)(g,2),N=v[0],k=v[1],y=r.a.useState(""),S=Object(m.a)(y,2),E=S[0],w=S[1],C=r.a.useState([]),D=Object(m.a)(C,2),R=D[0],U=D[1],V=r.a.useState({name:"",email:"",password:""}),M=Object(m.a)(V,2),z=M[0],J=M[1],F=r.a.useState({}),q=Object(m.a)(F,2),Q=q[0],W=q[1],ee=r.a.useState(!1),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=r.a.useState(!1),ce=Object(m.a)(re,2),se=ce[0],ie=ce[1],oe=r.a.useState(!1),le=Object(m.a)(oe,2),ue=le[0],me=le[1],je=r.a.useState(!1),be=Object(m.a)(je,2),he=be[0],de=be[1],_e=Object(j.g)(),fe=_e.location.pathname,pe=B("",{isEmpty:!0,maxLengthError:30}),xe=pe.isDirty&&pe.isEmpty||pe.isDirty&&pe.minLengthError||pe.isDirty&&pe.maxLengthError,Oe=r.a.useState(""),ge=Object(m.a)(Oe,2),ve=ge[0],Ne=ge[1],ke=B("",{isEmpty:!0,maxLengthError:30}),ye=pe.isDirty&&pe.isEmpty||pe.isDirty&&pe.minLengthError||pe.isDirty&&pe.maxLengthError;r.a.useEffect((function(){if(a){var e=localStorage.getItem("jwt");e&&Promise.all([Z.getUserInfo(e),X.getInitialMovies(e)]).then((function(e){var t=Object(m.a)(e,2),a=t[0],n=t[1];J(a[0]),b(n)})).catch((function(e){console.error(e)}))}}),[a]),r.a.useEffect((function(){O(JSON.parse(localStorage.getItem("visibleData")))}),[]),r.a.useEffect((function(){localStorage.setItem("visibleData",JSON.stringify(p))}),[p]),r.a.useEffect((function(){Ne(JSON.parse(localStorage.getItem("textState")))}),[]),r.a.useEffect((function(){localStorage.setItem("textState",JSON.stringify(ve))}),[ve]),r.a.useEffect((function(){var e=localStorage.getItem("jwt");z&&Promise.resolve(Z.getSavedMovies(e)).then((function(e){U(function(e){var t=z._id;return e.filter((function(e){var a=e.owner;return t===(void 0===a?"":a)}))}(e))})).catch((function(e){console.error(e)}))}),[z]),r.a.useEffect((function(){var e=R.slice(0,16);k(e)}),[R]);var Se=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={country:t.country||"",director:t.director||"",duration:t.duration||0,year:t.year||"",description:t.description||"",image:t.image,trailer:t.trailer||"https://youtube.ru",thumbnail:t.thumbnail||"https://youtube.ru",movieId:t.movieId,nameRU:t.nameRU||"",nameEN:t.nameEN||""},a=localStorage.getItem("jwt"),Z.addMovie(t,a).then((function(e){U([e].concat(Object(l.a)(R)))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e){var t=localStorage.getItem("jwt");Z.deleteMovies(e,t).then((function(){U(Object(l.a)(R.filter((function(t){return t.movieId!==e}))))})).catch((function(e){return console.log(e)}))};r.a.useEffect((function(){de(JSON.parse(localStorage.getItem("onButton")))}),[]),r.a.useEffect((function(){localStorage.setItem("onButton",JSON.stringify(he))}),[he]);var we=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(a=t,fetch("".concat($,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then(K).then((function(e){return e}))).then((function(e){var t=e.map((function(e){return e.email})),a=e.map((function(e){return e.name}));e&&(n(!0),W({email:t.join(""),name:a.join("")}))})));case 1:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}();r.a.useEffect((function(){var e=localStorage.getItem("jwt");e&&(we(e),_e.push(fe))}),[_e,fe,a]);var Ce=function(e){return function(e,t){return fetch("".concat($,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(K).then((function(e){return e?(localStorage.setItem("jwt",e.jwt),e):void 0}))}(e.email,e.password).then((function(e){if(!e.token)throw new Error("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c");localStorage.setItem("jwt",e.token),n(!0),_e.push("/movies")}))};return r.a.useEffect((function(){}),[Q]),Object(d.jsx)(H.Provider,{value:z,children:Object(d.jsx)("div",{className:"App",children:Object(d.jsx)("div",{className:"page",children:Object(d.jsxs)(j.d,{children:[Object(d.jsx)(j.b,{exact:!0,loggedIn:a,path:"/",children:Object(d.jsx)(L,{loggedIn:a})}),Object(d.jsx)(f,{exact:!0,loggedIn:a,path:"/movies",moviesInfo:i,onButton:he,setOnButton:de,handleAddPlaceSubmit:Se,setTextState:Ne,textState:ve,visibleData:p,setVisibleData:O,search:E,setSearch:w,preload:ue,text:pe,textValid:xe,removeCard:Ee,savedMovies:R,setPreload:me,component:A}),Object(d.jsx)(f,{exact:!0,loggedIn:a,path:"/saved-movies",setSearch:w,removeCard:Ee,text:ke,textValid:ye,savedMovies:R,setSavedMovies:U,visibleSaveData:N,setVisibleSaveData:k,search:E,moviesInfo:i,preload:ue,setPreload:me,component:G}),Object(d.jsx)(f,{exact:!0,loggedIn:a,path:"/profile",handleUpdateUser:function(e){var t=e.email,a=e.name,n=localStorage.getItem("jwt");Z.setUserInfo({name:a,email:t},n).then((function(e){J(e),ne(!0),ie(!1)})).catch((function(e){ne(!1),ie(!0),console.log(e)}))},onSignOut:function(){localStorage.removeItem("jwt"),n(!1),O(localStorage.removeItem("visibleData")),de(!1),Ne("");var e=i.slice(0,16);O(e),ne(!1),ie(!1),_e.push("/")},setConfirm:ne,setConfirmError:ie,userData:Q,confirm:ae,confirmError:se,component:Y}),Object(d.jsx)(x,{exact:!0,loggedIn:a,path:"/signup",component:T,onRegister:function(e){var t=e.name,a=e.email,n=e.password;return function(e,t,a){return fetch("".concat($,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:a})}).then(K).then((function(e){return e})).catch((function(e){j.b}))}(t,a,n).then((function(e){if(!e||400===e.statusCode)throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");return e})).then((function(){return Ce({email:a,password:n})}))}}),Object(d.jsx)(x,{exact:!0,loggedIn:a,path:"/signin",component:P,onLogin:Ce}),Object(d.jsx)(j.b,{path:"*",children:Object(d.jsx)(I,{location:fe})}),Object(d.jsx)(j.b,{children:a?Object(d.jsx)(j.a,{to:"/movies"}):Object(d.jsx)(j.a,{to:"/"})})]})})})})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(g.a,{children:Object(d.jsx)(ee,{})})}),document.getElementById("root")),te()}},[[40,1,2]]]);
//# sourceMappingURL=main.f94538bc.chunk.js.map